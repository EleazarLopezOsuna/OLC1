[
  {
    "Id": "1447660",
    "ThreadId": "645976",
    "Html": "Hi <br />\n<br />\nI have a sql-like grammar which was previously working fine. It would successfully parse<br />\n<br />\nSELECT COUNT(DISTINCT(item)) ...<br />\n<br />\nbut I've recently needed to introduce <br />\n<br />\nSELECT DISTINCT option and it has thrown up this error.<br />\n<pre><code>State S4 (Inadequate)\n  Shift-reduce conflicts on inputs: DISTINCT\n  Shift items:\n    selectClause -&gt; SELECT ·distinctExpression expressionList \n    distinctExpression -&gt; ·DISTINCT \n  Reduce items:\n    distinctExpression -&gt; · [[ ... COUNT DISTINCT ... ]\n  Transitions: distinctExpression-&gt;S94, DISTINCT-&gt;S95\n</code></pre>\n\nThe salient parts of the grammar (as far as I can tell are)<br />\n<pre><code>Dim [DISTINCT] = ToTerm(&quot;DISTINCT&quot;)\n\nselectClause.Rule = [SELECT] + distinctExpression + listExpression\ndistinctExpression.Rule = [DISTINCT] Or Empty\nlistExpression.Rule = MakePlusRule(listExpression, [COMMA], columnExpression)\ncolumnExpression.Rule = expression Or ...\nexpression.Rule = term Or ...\nterm.Rule = functionExpression Or ...\nfunctionExpression.Rule = functionNameExpression + parenExpression Or\n                                      functionNameExpression + [EMPTYPAREN]\nfunctionNameExpression.Rule = [COUNT] Or [DISTINCT] ...\nparenExpression.Rule = LPAREN + listExpression + RPAREN    \n</code></pre>\n\nDISTINCT as a function I don't think would ever appear without COUNT so perhaps I haven't defined it correctly with respect to function names. It previously returned a COUNT node containing a DISTINCT node nested within it.<br />\n<br />\nOTOH, I wasn't sure if I should be explicitly given hints as to how to process the DISTINCT.<br />\n<br />\nI've looked at the sql grammar example and it looks like the DISTINCT is just being treated as identifier  in the context of COUNT(DISTINCT ... <br />\n<br />\nIs there a (quick!) fix for the way that I am doing it or should I rework it to match the example. <br />\n<br />\nAgain, I'd be grateful of any pointers <br />\n<br />\nThx in advance<br />\n<br />\nS<br />\n",
    "PostedDate": "2015-10-08T08:42:41.41-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  }
]